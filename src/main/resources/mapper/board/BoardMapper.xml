<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.pkr.project.board.mapper.BoardMapper">
    <select id="selectBoard" parameterType="Map" resultType="com.pkr.project.common.vo.CustomMap">
		SELECT
			(ROW_NUMBER() OVER()) AS ROWNUM
			,IDX
			,CONTENTS
			,CREATED_AT
			,CREATED_BY
			,TITLE
		FROM
			TB_BOARD
		WHERE 1=1
	    <if test='title != null and title != ""'>
	    	AND TITLE like '%' || #{title} || '%'
	    </if>			
	    <if test='contents != null and contents != ""'>
	    	AND TO_CHAR(CREATED_AT, 'YYYY-MM-DD') like '%' || #{contents} || '%'
	    </if>			
	    <if test='createdStart != null and createdStart != ""'>
	    	AND TO_CHAR(CREATED_AT, 'YYYY-MM-DD') >= #{createdStart}
	    </if>			
	    <if test='createdEnd != null and createdEnd != ""'>
	    	AND TO_CHAR(CREATED_AT, 'YYYY-MM-DD') >= #{createdEnd}
	    </if>			
		ORDER BY IDX
		LIMIT #{pageSize} OFFSET (#{pageNumber} - 1) * #{pageSize}
    </select>

<!--     <select id="getBoardTotalCount" parameterType="Map" resultType="Int"> -->
<!--         SELECT COUNT(IDX) -->
<!--         FROM TB_BOARD -->
<!--         WHERE 1=1 -->
<!--         <if test="sk != '' || sk != null"> -->
<!--             <if test="sk == 'title'"> -->
<!--                 AND TITLE LIKE CONCAT('%', #{sv}, '%') -->
<!--             </if> -->
<!--             <if test="sk == 'contents'"> -->
<!--                 AND CONTENTS LIKE CONCAT('%', #{sv}, '%') -->
<!--             </if> -->
<!--             <if test="sk == 'createdBy'"> -->
<!--                 AND CREATED_BY LIKE CONCAT('%', #{sv}, '%') -->
<!--             </if> -->
<!--         </if> -->
<!--     </select> -->

    
</mapper>
